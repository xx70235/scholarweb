/*!
 * Last minify build by MatthiasWeb: 17. April 2017, 12:55 german time / Mon Apr 17 12:55:23 UTC 2017
 */

function RMLFormat(){var args=arguments;return args[0].replace(/{(\d+)}/g,function(match,number){return typeof args[+number+1]!="undefined"?args[+number+1]:match})}function RMLStartsWith(str,search){return str.indexOf(search)===0}function RMLisDefined(attr){if(typeof attr!==typeof undefined&&attr!==false&&attr!==null){return true}return false}function RMLWpIs(name){return typeof window.wp!=="undefined"&&typeof window.wp[name]!=="undefined"}function RMLisAIO(object){return object instanceof jQuery&&document.body.contains(object[0])&&object.data("allInOneTree")}function RMLDebug(message){if(typeof rmlOpts==="object"&&rmlOpts.debug){var args=jQuery.makeArray(arguments);args.unshift("[RML_DEBUG]");console.debug.apply(console,args)}}function RMLUrlParams(aIgnore){return function(a){if(a=="")return{};var b={};for(var i=0;i<a.length;++i){var p=a[i].split("=",2);if(p.length!=2)continue;if(aIgnore&&aIgnore.length>0&&jQuery.inArray(p[0],aIgnore)>-1)continue;b[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "))}return b}(window.location.search.substr(1).split("&"))}Function.prototype.bind=function(){}.bind||function(b){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}function c(){}var a=[].slice,f=a.call(arguments,1),e=this,d=function(){return e.apply(this instanceof c?this:b||window,f.concat(a.call(arguments)))};c.prototype=this.prototype;d.prototype=new c;return d};if(typeof jQuery.fn.replaceWithPush!=="function"){jQuery.fn.replaceWithPush=function(a){var $=jQuery,$a=$(a);this.replaceWith($a);return $a}}var RML_HOOK={hooks:[],register:function(name,callback){var names=name.split(" "),curName;for(var i=0;i<names.length;i++){curName=names[i];if("undefined"==typeof RML_HOOK.hooks[curName])RML_HOOK.hooks[curName]=[];RML_HOOK.hooks[curName].push(callback)}},call:function(name,args,context){RMLDebug("Call js hook '"+name+"' with arguments",args);if("undefined"!=typeof RML_HOOK.hooks[name]){for(var i=0;i<RML_HOOK.hooks[name].length;++i){if(typeof args==="object"){if(Object.prototype.toString.call(args)==="[object Array]"){args.push(jQuery)}else{args=[args,jQuery]}if(false==RML_HOOK.hooks[name][i].apply(context,args)){break}}else{if(false==RML_HOOK.hooks[name][i].apply(context,[jQuery])){break}}}}},exists:function(name){return"undefined"!=typeof RML_HOOK.hooks[name]}};window.rml={hooks:RML_HOOK,typeAccept:{}};window.rml.library={attachments:{},lastIdInView:false,gridViewMediaFrame:false,treeContentLoader:jQuery.Deferred(),treeContentAjaxLoader:null,updateRestrictions:function(obj,container){var restrictions=obj.attr("data-restrictions"),warningFa=container.find(".aio-toolbar-placeholder > .fa-warning"),langs=rmlOpts.lang.toolbarItems.restrictions;restrictions=restrictions.length>0?restrictions.split(","):[];if(restrictions.length>0){var ul="<ul>",i,langStringFound,inherits,inheritsCnt=0;jQuery.each(langs,function(key,value){langStringFound=false;inherits=false;for(var i=0;i<restrictions.length;i++){if(restrictions[i].indexOf(key)===0){langStringFound=true;if(restrictions[i].slice(-1)===">"){inherits=true;inheritsCnt++}break}}if(langStringFound){ul+="<li>"+value;if(inherits){ul+=" <b>*</b>"}ul+="</li>"}});ul+="</ul>";if(inheritsCnt>0){ul+="<b>*</b> "+rmlOpts.lang.toolbarItems.restrictionsInherits}var args={};args.text=rmlOpts.lang.toolbarItems.restrictionsSuffix+ul;window.rml.hooks.call("restrictionText",[args,obj],container);warningFa.show();warningFa.attr("data-aio-tooltip-text",args.text);container.allInOneTree("reinit","tooltips")}else{warningFa.hide()}},initializeToolbar:function(){if(!RMLWpIs("media")){return}var wp=window.wp;var oldRender=wp.media.view.Attachment.Library.prototype.render;wp.media.view.Attachment.Library.prototype.render=function(){oldRender.apply(this,arguments);window.rml.hooks.call("gridItem/afterRender",[this.$el,this.model],this)};wp.media.view.AttachmentFilters.RML=wp.media.view.AttachmentFilters.extend({className:"attachment-filters attachment-filters-rml",createFilters:function(){if(!rmlOpts.namesSlug){this.filters={};return}var filters={},names=rmlOpts.namesSlug.names,types=rmlOpts.namesSlug.types,slugs=rmlOpts.namesSlug.slugs;filters.all={text:"All",props:{rml_folder:"",rml_type:""},priority:10};window.rml.hooks.call("propsForAllAJAX",[filters.all,rmlOpts.namesSlug],this);var i,props;for(i=0;i<names.length;i++){props={rml_folder:slugs[i],rml_type:types[i]};window.rml.hooks.call("propsForMediaFolderEntryAJAX",[props,rmlOpts.namesSlug],this);filters[slugs[i]]={text:names[i],props:props,priority:20+i}}this.filters=filters}});var AttachmentsBrowser=wp.media.view.AttachmentsBrowser;wp.media.view.AttachmentsBrowser=wp.media.view.AttachmentsBrowser.extend({initialize:function(){AttachmentsBrowser.prototype.initialize.apply(this,arguments);this.collection.on("remove",function(){window.rml.hooks.call("gridItem/remove",jQuery.makeArray(arguments),this)})},createToolbar:function(){this.$el.data("backboneView",this);AttachmentsBrowser.prototype.createToolbar.call(this);window.rml.library.treeContentLoader.done(function(){var myNewFilter=new wp.media.view.AttachmentFilters.RML({className:"attachment-filters attachment-filters-rml attachment-filters-rml-loaded",controller:this.controller,model:this.collection.props,priority:-75}).render();this.toolbar.set("rml_folder",myNewFilter);window.rml.hooks.call("createToolbar",false,this);var timeout;this.collection.on("change reset add remove",function(){clearTimeout(timeout);timeout=setTimeout(function(){window.rml.hooks.call("attachmentsChanged",arguments,this)}.bind(this),500)},this)}.bind(this),5e3)}});jQuery(document).ajaxComplete(function(e,xhs,req){try{if(req.data.indexOf("action=delete-post")>-1){this.refreshAllCounts()}}catch(e){}}.bind(this))},initializeTreeContentLoader:function(selectedId){if(this.treeContentAjaxLoader===null){this.treeContentAjaxLoader=this.loadTreeContent(selectedId).done(function(response){if(response.success){rmlOpts.namesSlug=response.data.namesSlug;this.treeContentLoader.resolve(response)}}.bind(this))}},sweetAlertPosition:function(){var $=jQuery;var modal=$(".sweet-alert.showSweetAlert");if(modal.size()>0){var height=modal.outerHeight();modal.stop().animate({"margin-top":(height/2+8.5)*-1},500)}},getMediaPickerSelected:function(){var $=jQuery,modal=null,active=null;$(".media-modal.wp-core-ui").each(function(){if($(this).parent().is(":visible")){modal=$(this)}});if(modal!==null){active=modal.find(".attachment-filters.attachment-filters-rml").find(":selected")}return active},getObjectOfMediaPickerOrActive:function(){var modalActive=this.getMediaPickerSelected();if(modalActive!==null){var modalID=modalActive.attr("value");return jQuery(".aio-tree-instance").allInOneTree("byId",modalID)}else{return jQuery(".aio-tree-instance").allInOneTree("active")}},getUrlParameter:function(sParam,URL){var sPageURL=decodeURIComponent(URL?URL:window.location.search.substring(1)),sURLVariables=sPageURL.split("&"),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split("=");if(sParameterName[0]===sParam){return sParameterName[1]===undefined?true:sParameterName[1]}}},getFolderInfo:function(fid,infoType){var result=null;try{jQuery.each(rmlOpts.mce.dirs,function(key,value){if(value.value==fid){result=value}})}catch(e){}if(typeof infoType!=="undefined"&&result!==null){return result[infoType]}return result},getBackboneOfAIO:function(obj){var parentModal=obj.parents(".media-modal"),browser,backboneView;if(parentModal.size()>0){browser=parentModal.find(".attachments-browser")}else{browser=jQuery("#wpbody-content .attachments-browser")}backboneView=browser.data("backboneView");return{browser:browser,view:backboneView}},refreshAllCounts:function(){this.refreshCount(jQuery(".aio-tree-instance"))},showShortcutInfo:function(rmlContainer){var $=jQuery,loadingContainer=this.showShortcutInfoAppendTo(rmlContainer,'<div style="height:50px;text-align:center;"><div class="spinner is-active" style="float: initial;margin: 0;"></div></div>');rmlContainer.addClass("rml-shortcut-info-init");$.ajax({type:"POST",url:rmlOpts.ajaxUrl,data:{action:"rml_shortcut_infos",nonce:rmlOpts.nonces.shortcutInfo,id:rmlContainer.attr("data-id")},success:function(response){if(response.length>0){rmlContainer=loadingContainer.replaceWithPush(response);window.rml.hooks.call("shortcutInfoContainer",[rmlContainer])}}.bind(this)})},showShortcutInfoAppendTo:function(rmlContainer,html){var $=jQuery,attachmentDetails=rmlContainer.parents(".attachment-details"),mediaSidebar=rmlContainer.parents(".media-sidebar");if(rmlContainer.hasClass("rtg-container")){return rmlContainer.replaceWithPush(html)}if(mediaSidebar.size()>0){return $(html).appendTo(mediaSidebar)}else if(attachmentDetails.size()>0){return $(html).insertAfter(attachmentDetails.children(".attachment-info").children(".settings"))}else{return rmlContainer.replaceWithPush(html)}},refreshCount:function(container,_cb){jQuery.ajax({url:rmlOpts.ajaxUrl,data:{action:"rml_folder_count",nonce:rmlOpts.nonces.folderCount},invokeData:_cb,success:function(response){if(response.success){container.allInOneTree("counts",response.data)}if(typeof _cb==="function"){_cb(response)}}})},liveCustomLists:false,customLists:function(){var $=jQuery;$(".rml-root-list.rml-custom-list:not(.rml-custom-init)").each(function(){$(this).addClass("rml-custom-init");window.rml.hooks.call("customList",$(this));if(typeof $(this).attr("id")!=="undefined"){window.rml.hooks.call("customList-"+$(this).attr("data-id"),$(this))}});if(!this.liveCustomLists){$(document).on("click",".rml-root-list.rml-custom-list a",function(e){var id=$(this).attr("data-id"),list=$(this).parents(".rml-root-list.rml-custom-list");list.children("input").val(id);list.find("a.active").removeClass("active");$(this).addClass("active");e.preventDefault();return false});this.liveCustomLists=true}},iterateDraggedItems:function(ui,container,listMode,gridMode){var $=jQuery;if(container.data("isListMode")){var trs=$('input[name="media[]"]:checked');if(trs.size()>0){trs.each(function(){listMode($(this).parents("tr"))})}else{listMode(ui)}}else{var backbone=window.rml.library.getBackboneOfAIO(container),selected;if(backbone.view){gridMode=gridMode.bind(backbone);try{selected=backbone.view.options.selection.models}catch(e){}if(selected&&selected.length>0){for(var i=0;i<selected.length;i++){gridMode(selected[i].attributes)}}else{var id=ui.data("id"),models=backbone.view.collection.models;for(var i=0;i<models.length;i++){if(models[i].id==id){gridMode(models[i].attributes);break}}}}}},loadTreeContent:function(selectedId){var $=jQuery;return $.post(rmlOpts.ajaxUrl,{action:"rml_tree_content",nonce:rmlOpts.nonces.treeContent,rml_folder:selectedId})}};window.rml.hooks.register("afterInit/ML",function(){window.rml.hooks.register("attachmentsChanged",function(){if(RMLisAIO(jQuery(this))){jQuery(this).allInOneTree("reinit","sticky")}}.bind(this))});window.rml.hooks.register("refreshView",function($){var backbone=window.rml.library.getBackboneOfAIO($(this));if(backbone.browser.size()>0&&typeof backbone.view=="object"){try{backbone.view.collection.props.set({ignore:+new Date})}catch(e){console.log(e)}}else{window.location.reload()}});window.rml.hooks.register("ready",function(){window.rml.library.initializeToolbar()});window.rml.hooks.register("renamed",function(folderId,newName,slug,$){$(this).allInOneTree("rename",newName);$(this).allInOneTree("active").attr("data-slug",slug)});window.rml.hooks.register("createdBeforeRendering",function(args,createResponse,$){$(this).allInOneTree("loader",true);window.rml.library.loadTreeContent().done(function(response){if(response.success){var ul=$(response.data.nodes);if(ul.size()>0){$(this).allInOneTree("toolbarButton","rename");$(this).allInOneTree("nodesHTML",ul.html());$(this).allInOneTree("loader",false)}rmlOpts.namesSlug=response.data.namesSlug;var backbone=window.rml.library.getBackboneOfAIO($(this));if(typeof backbone.view==="object"){var RMLFilter=backbone.view.toolbar.get("rml_folder");RMLFilter.createFilters()}$(".attachment-filters.attachment-filters-rml").append('<option value="'+createResponse.data.id+'">'+args[0]+"</option>");window.rml.hooks.call("created",[args,createResponse,response],$(this))}}.bind(this))});window.rml.hooks.register("general",function(e,args){jQuery.ajaxPrefilter(function(options,originalOptions,jqXHR){try{if(RMLisDefined(originalOptions.data)&&RMLisDefined(originalOptions.data.action)&&RMLisDefined(originalOptions.data.query.rml_folder)){if(originalOptions.data.action=="query-attachments"){window.rml.hooks.call("modifyMediaGridRequestForFolder",[options,originalOptions,jqXHR,originalOptions.data.query.rml_folder])}}}catch(e){}})});window.rml.hooks.register("modifyMediaGridRequestForFolder",function(options,originalOptions,jqXHR,fid,$){if(fid<0){return}var type=originalOptions.data.query.rml_type;if(type){var action="modifyMediaGridRequestForFolder/Type/"+type;window.rml.hooks.call(action,arguments)}});window.rml.hooks.register("afterInit/ML",function($){var container=$(this),fixedHeader=container.find(".aio-fixed-header");if(fixedHeader.size()>0){$(document).scroll(function(){var reachedOverflow=$(this).scrollTop()+fixedHeader.outerHeight()+fixedHeader.position().top;if(reachedOverflow>container.find(".aio-list-standard").offset().top){container.addClass("aio-theme-wordpress-fixed");fixedHeader.addClass("aio-reached-overflow").css("min-width",container.children(".aio-wrap").width()-10+"px")}else{container.removeClass("aio-theme-wordpress-fixed");fixedHeader.removeClass("aio-reached-overflow").css("min-width","")}})}});window.rml.hooks.register("afterInit/modal",function(menu,modal,$){var container=$(this),fixedHeader=container.find(".aio-fixed-header"),fixedHeaderHelper=container.find(".aio-fixed-header-helper"),headerHeight=fixedHeader.outerHeight();if(container.hasClass("aio-theme-wordpress-fixed")&&fixedHeader.size()>0&&fixedHeaderHelper.size()>0){menu.scroll(function(){var modalTop=modal.position().top,reachedOverflow=$(this).scrollTop(),toReach=container.find(".aio-list-standard").offset().top+reachedOverflow-modalTop;if(reachedOverflow>toReach){fixedHeaderHelper.height(headerHeight);container.addClass("aio-theme-wordpress-fixed");fixedHeader.addClass("aio-reached-overflow").css({"min-width":container.children(".aio-wrap").width()-10+"px",top:modalTop+"px"})}else{container.removeClass("aio-theme-wordpress-fixed");fixedHeader.removeClass("aio-reached-overflow").css("min-width","");fixedHeaderHelper.height(0)}})}});window.rml.hooks.register("switchFolder",function(obj,id,type,$){window.rml.library.updateRestrictions(obj,$(this))});window.rml.hooks.register("afterInit",function($){if(!$("body").data("rml")){$(document).on("keydown",function(e){$("body").addClass("rml-holding")});$(document).on("keyup",function(e){$("body").removeClass("rml-holding")});$("body").data("rml",true)}});window.rml.returnTrue=function(){return true};window.rml.typeAccept["3"]=window.rml.returnTrue;window.rml.typeAccept["4"]=window.rml.returnTrue;window.rml.typeAccept["0"]=window.rml.returnTrue;window.rml.typeAccept["1"]=function(){return false};window.rml.typeAccept["2"]=function(ui,container,$){var foundInvalid=false;window.rml.library.iterateDraggedItems(ui,container,function(tr){if(!tr.find(".media-icon").hasClass("image-icon")){foundInvalid=true}},function(attributes){if(attributes.type!="image"){foundInvalid=true}});return!foundInvalid};window.rml.hooks.register("aioSettings/grid",function(settings,$){settings.others.onSwitchFolder=function(obj,oldID){if(!RMLisAIO($(this))){return false}var id=obj.attr("data-aio-id"),type=obj.attr("data-aio-type"),selectToChange;if(id=="AIO_NEW_TO_CREATE"||oldID=="AIO_NEW_TO_CREATE"){return false}$(this).allInOneTree("active",id,true);selectToChange=$($(this).allInOneTree("option").container.customSelectToChange);selectToChange.val(id.length>0?id:"all").change();if(obj.hasClass("needs-refresh")){$(this).allInOneTree("toolbarButton","refresh");obj.removeClass("needs-refresh")}setTimeout(function(){$(this).allInOneTree("reinit","movement")}.bind(this),500);window.rml.hooks.call("switchFolder",[obj,obj.attr("data-aio-id"),obj.attr("data-aio-type")],$(this));return false}});window.rml.hooks.register("afterInit/grid",function($){var container=$(this);window.rml.hooks.register("attachmentsChanged",function(){if(RMLisAIO(container)){container.allInOneTree("reinit","movement")}});var backbone=window.rml.library.getBackboneOfAIO(container);if(typeof backbone.view!=="undefined"){var returnToLibrary=backbone.view.$(".media-button-backToLibrary");if(returnToLibrary.size()>0){container.allInOneTree("movement",false)}}container.allInOneTree("active",container.allInOneTree("active"))});window.rml.hooks.register("gridItem/remove",function(model,collection,event,$){var id=model.attributes.id;for(var i=0;i<collection.models.length;i++){if(collection.models[i].attributes.rmlIsShortcut===id){collection.remove(collection.models[i]);this.remove(collection.models[i])}}});window.rml.hooks.register("gridItem/afterRender",function(el,model,$){el.data("backboneModel",model);var isShortcut=model.attributes.rmlIsShortcut>0,icon=el.children(".attachment-preview").children(".rml-shortcut-container");icon.remove();if(isShortcut>0){el.addClass("rml-shortcut rml-shortcut-grid");icon=$('<div class="rml-shortcut-container"><i class="fa fa-share rml-shortcut-icon"></i></div>').appendTo(el.children(".attachment-preview"));icon.tooltipster({contentAsHTML:true,content:'<div class="aio-tooltip-title">'+rmlOpts.lang.shortcut+'</div><div class="aio-tooltip-text">'+rmlOpts.lang.shortcutInfo+"</p>",delay:300,theme:"tooltipster-aio",maxWidth:300})}else{el.removeClass("rml-shortcut rml-shortcut-grid")}});window.rml.hooks.register("afterInit/list",function($){window.rml.library.updateRestrictions($(this).allInOneTree("active"),$(this))});window.rml.library.warnDelete=function(){return confirm((commonL10n.warnDelete||"")+rmlOpts.lang.warnDelete)};window.rml.hooks.register("ready/mediaLibrary",function($){$(".rmlShortcutSpan").each(function(){var tr=$(this).parents("tr").addClass("rmlIsShortcut"),imgContainer=tr.children("td.title").find(".media-icon");var icon=$('<div class="rml-shortcut-container"><i class="fa fa-share rml-shortcut-icon"></i></div>').appendTo(imgContainer);icon.tooltipster({contentAsHTML:true,content:'<div class="aio-tooltip-title">'+rmlOpts.lang.shortcut+'</div><div class="aio-tooltip-text">'+rmlOpts.lang.shortcutInfo+"</p>",delay:300,theme:"tooltipster-aio",maxWidth:300})})});window.rml.hooks.register("newModal",function(filter,$){var menu=$(this).find(".media-menu"),container,containerID=$(this).parent().attr("id");if(!menu.data("rml")){menu.append('<div class="separator"></div>');menu.data("rml",true)}else{menu.find(".aio-tree").remove()}$(this).addClass("rml-media-modal");$(this).find(".media-frame.hide-menu").removeClass("hide-menu");var mediaButtonReverse=$(this).find(".media-button-reverse");if(mediaButtonReverse.is(":visible")){return}container=$(".rml-container.rml-dummy").clone().appendTo(menu);container.removeClass("rml-dummy").addClass("rml-no-dummy");var aioSettings=$.extend(true,{},window.rml.defaultAioSettings,{container:{isListMode:false,isModalMode:[menu,$(this)],listMode:"grid",customSelectToChange:"#"+containerID+" .attachment-filters-rml",isResizable:false,isSticky:false,isResizable:false,isWordpressModal:true,theme:"wordpress wordpress-fixed"},movement:{selector:"#"+containerID+" ul.attachments > li"}});window.rml.hooks.call("aioSettings",aioSettings);window.rml.hooks.call("aioSettings/grid",aioSettings);window.rml.hooks.call("aioSettings/modal",aioSettings);window.rml.hooks.call("aioSettings/modal/grid",aioSettings);container.allInOneTree(aioSettings)});window.rml.hooks.register("general",function($){setInterval(function(){$(".media-modal .attachments-browser").each(function(){var isInitialized=$(this).data("initialized");if(!isInitialized){$(this).data("initialized",true);window.rml.library.initializeTreeContentLoader();window.rml.hooks.call("newModal",$(this),$(this).parents(".media-modal"))}});$(".rml-shortcut-info:visible:not(.rml-shortcut-info-init)").each(function(){window.rml.library.showShortcutInfo($(this))})},500)});window.rml.hooks.register("afterInit/modal",function(){var $=jQuery,container=$(this),backbone=window.rml.library.getBackboneOfAIO(container);if(backbone.browser){var select=backbone.view.$(".attachment-filters-rml-loaded");if(select.size()>0){var selected=select.val();if(selected!=="all"){container.allInOneTree("active",selected,true)}}}});window.rml.hooks.register("ready/mediaLibrary",function($){var wpTableList=$(".wp-list-table.media tbody"),lastIdInView;if(wpTableList){wpTableList.sortable({disabled:true,appendTo:"body",tolerance:"pointer",scrollSensitivity:50,placeholder:"ui-sortable-helper-wp-media-list",scrollSpeed:50,distance:10,cursor:"move",start:function(e,ui){ui.placeholder.height(ui.helper[0].scrollHeight);var $=jQuery;lastIdInView=$(".wp-list-table.media tbody tr:last").find('input[name="media[]"]').val()},update:function(e,ui){var next=ui.item.next(),nextId,attachmentId;if(typeof next.html()==="undefined"){nextId=false}else{nextId=next.find('input[name="media[]"]').val()}attachmentId=ui.item.find('input[name="media[]"]').val();window.rml.hooks.call("attachmentOrder",[window.rml.library.getObjectOfMediaPickerOrActive(),attachmentId,nextId,lastIdInView,next,e,ui])}});window.rml.library.wpTableList=wpTableList}});window.rml.hooks.register("ready",function($){if(!RMLWpIs("media")){return}var wp=window.wp;var Attachments=wp.media.view.Attachments;wp.media.view.Attachments=wp.media.view.Attachments.extend({initialize:function(){Attachments.prototype.initialize.apply(this,arguments);var collection=this.collection,defaultComparator=this.collection.comparator,defaultComparatorAvailable=typeof defaultComparator==="function";this.collection.comparator=function(a,b,c){if(collection.props.get("rml_folder")!==undefined){if(typeof a.attributes.rmlGalleryOrder!=="undefined"&&typeof b.attributes.rmlGalleryOrder!=="undefined"){var aO=a.attributes.rmlGalleryOrder,bO=b.attributes.rmlGalleryOrder;if(aO!=-1&&bO!=-1){if(aO<bO){return-1}else if(aO>bO){return 1}else{return 0}}}}if(defaultComparatorAvailable){return defaultComparator.apply(this,arguments)}}},initSortable:function(){var collection=this.collection,_Attachments=this;if(wp.media.isTouchDevice||!this.options.sortable||!$.fn.sortable){return}this.options.sortable={appendTo:"body",tolerance:"pointer",scrollSensitivity:50,scrollSpeed:50,scroll:true,distance:10,cursor:"move",start:function(event,ui){ui.item.data("lastId",collection.models[collection.models.length-1].id);ui.item.data("sortableIndexStart",ui.item.index())},update:function(event,ui){var next=ui.item.next(),nextId,attachmentId=ui.item.data("id"),lastId=ui.item.data("lastId");if(typeof next.html()==="undefined"){nextId=false}else{nextId=next.data("id")}window.rml.hooks.call("attachmentOrder",[window.rml.library.getObjectOfMediaPickerOrActive(),attachmentId,nextId,lastId,next,event,ui,_Attachments]);var model=collection.at(ui.item.data("sortableIndexStart")),comparator=collection.comparator;delete collection.comparator;collection.remove(model,{silent:true});collection.add(model,{silent:true,at:ui.item.index()});collection.comparator=comparator;collection.trigger("reset",collection);collection.saveMenuOrder()}};Attachments.prototype.initSortable.call(this)},refreshSortable:function(rmlOrder){if(wp.media.isTouchDevice||!this.options.sortable||!$.fn.sortable){return}var collection=this.collection,orderby=collection.props.get("orderby"),enabled=rmlOrder||"menuOrder"===orderby||!collection.comparator;this.$el.sortable("option","disabled",!enabled)}})});window.rml.hooks.register("attachmentOrder",function(folderObj,attachmentId,nextId,lastId,next,event,ui){var data={action:"rml_attachment_order",nonce:rmlOpts.nonces.attachmentOrder,folderId:folderObj.attr("data-aio-id"),attachmentId:attachmentId,nextId:nextId,lastId:lastId};ui.item.stop().fadeTo(100,.2);jQuery.post(rmlOpts.ajaxUrl,data,function(response){ui.item.stop().fadeTo(100,1);window.rml.hooks.register("attachmentOrderFinished",response)})});window.rml.hooks.register("modifyMediaGridRequestForFolder",function(options,originalOptions,jqXHR,fid,$){var foundFilter=false,obj=$(".rml-fid-"+fid),contentCustomOrder;if(fid<0||!obj||obj.size()<0||(contentCustomOrder=obj.attr("data-content-custom-order"))!=="1"){return}try{if(RMLisDefined(originalOptions.data.query.post_mime_type)||RMLisDefined(originalOptions.data.query.monthnum)||RMLisDefined(originalOptions.data.query.year)){if(originalOptions.data.query.post_mime_type!="all"||originalOptions.data.query.monthnum>0||originalOptions.data.query.year>0){foundFilter=true}}}catch(e){}if(foundFilter){$("body").addClass("rml-view-gallery-filter-on")}else{$("body").removeClass("rml-view-gallery-filter-on")}originalOptions.data.query.order="ASC";originalOptions.data.query.orderby="rml";var swallow=$.param(originalOptions.data);options.data=swallow});window.rml.hooks.register("actionButton/rml_attachment_order_by",function(post,$){post.orderby=$(this).parent().children("select").val()});window.rml.hooks.register("actionButtonDone/rml_attachment_order_reset actionButtonDone/rml_attachment_order_by actionButtonDone/rml_attachment_order_by_last_custom",function(options,$){var fid=options.method,action=options.action;if(action!=="rml_attachment_order_by_last_custom"){$(".rml-fid-"+fid).each(function(){$(this).attr("data-content-custom-order",action==="rml_attachment_order_by"?"1":"0")})}$(".aio-tree-instance.rml-container").each(function(){$(this).allInOneTree("toolbarButton","refresh")})});window.rml.hooks.register("folderMeta/save/failed",function(response,fields,ajaxContext,sweet,name,$){window.rml.sweetAlert.enableButtons();var liHTML="<li>"+response.data.errors.join("</li><li>")+"</li>";jQuery(".rml-meta-errors").html(liHTML).show();window.rml.library.sweetAlertPosition()});window.rml.hooks.register("folderMeta/save/success",function(response,fields,ajaxContext,sweet,name,$){window.rml.sweetAlert.close();var folderId=fields.folderId;if(RMLisDefined(response.data.newSlug)){var slug=response.data.newSlug,newName=fields.name;window.rml.hooks.call("renamed",[folderId,newName,slug],$(this))}});window.rml.hooks.register("folderMeta/loaded",function(response,fid,name,$){var that=$(this);window.rml.sweetAlert({title:name,text:response,html:true,confirmButtonText:rmlOpts.lang.save,cancelButtonText:rmlOpts.lang.close,closeOnConfirm:false,showLoaderOnConfirm:true,showCancelButton:true},function(){var sweet=this;jQuery(".rml-meta-errors").hide();window.rml.library.sweetAlertPosition();var data=jQuery("form.rml-meta").serializeArray();var fields={};jQuery.each(data,function(key,value){fields[value.name]=value.value});fields.action="rml_meta_save";fields.nonce=rmlOpts.nonces.metaSave;jQuery.ajax({url:rmlOpts.ajaxUrl,type:"POST",data:fields,success:function(response){var hookName;if(response.success){hookName="folderMeta/save/success"}else{hookName="folderMeta/save/failed"}window.rml.hooks.call(hookName,[response,fields,this,sweet,name],that)}})});setTimeout(function(){window.rml.hooks.call("folderMeta/parsed",[response,fid,name],that)}.bind(this),500)});window.rml.hooks.register("folderMeta/parsed",function(response,fid,name,$){var hasFilter=$("body").hasClass("rml-view-gallery-filter-on");var picker=$(".rml-meta-media-picker");if(picker.size()<=0){return}picker.wpMediaPicker({label_add:rmlOpts.lang.metadata.coverImage.label_add,label_replace:rmlOpts.lang.metadata.coverImage.label_replace,label_remove:rmlOpts.lang.metadata.coverImage.label_remove,label_modal:rmlOpts.lang.metadata.coverImage.label_modal,label_button:rmlOpts.lang.metadata.coverImage.label_button,query:{post_mime_type:"image"},onShow:function(){$(".sweet-overlay,.sweet-alert").fadeOut()},onClose:function(){$(".sweet-overlay,.sweet-alert").fadeIn();if(!hasFilter){$("body").removeClass("rml-view-gallery-filter-on")}},htmlChange:function(){setTimeout(function(){picker.parents("td").find(".spinner").remove();$(".rml-meta-media-picker").parents("fieldset").show();window.rml.library.sweetAlertPosition()}.bind(this),500)}})});window.rml.hooks.register("ready",function($){$(document).on("click",".rml-button-wipe, .sweet-alert a.actionbutton",function(e){if(window.confirm(rmlOpts.lang.wipe)){var id=$(this).attr("id"),useCallback=false;if(RMLisDefined(id)){window.rml.hooks.call("folderMeta/action/"+id);useCallback=true}var button=$(this),method=button.attr("data-method"),action=$(this).attr("data-action");button.html('<div class="spinner is-active" style="float: initial;margin: 0;"></div>').prop("disabled",true);button.attr("disabled","disabled");var post={action:action,nonce:rmlOpts.nonces[$(this).attr("data-nonce-key")],method:method};window.rml.hooks.call("actionButton/"+action,[post],this);jQuery.ajax({url:rmlOpts.ajaxUrl,data:post,invokeData:button,success:function(response){var _btn=this.invokeData;if(useCallback){window.rml.hooks.call("folderMeta/actionFinished/"+id,[response])}window.rml.hooks.call("actionButtonDone/"+action,[post],this);if(response.success){_btn.html('<i class="fa fa-check"></i> '+rmlOpts.lang.done)}else{_btn.html('<i class="fa fa-error"></i> '+rmlOpts.lang.failed)}button.attr("disabled",false)}})}e.preventDefault();return false})});window.rml.hooks.register("ready/noMediaLibrary",function(e,args){var $=jQuery;var container=$('<div class="rml-options"><nav><ul></ul></nav></div>').insertBefore($('[for="rml_hide_upload_preview"]').parents("table").prev()).removeClass("rml-dummy");var headline=$("<h2>Real Media Library</h2>").insertBefore(container);var nav=container.find("nav ul");var navLiCnt=0;$("table.form-table").each(function(){var oHeadline=$(this).prev(),sHeadline=oHeadline.html();if(typeof sHeadline!=="undefined"&&RMLStartsWith(sHeadline,"RealMediaLibrary")){sHeadline=sHeadline.split(":",2)[1];var li=$('<li class="nav-tab '+(navLiCnt===0?"nav-tab-active":"")+'">'+sHeadline+"</li>").appendTo(nav);var section=$(this).appendTo(container);if(navLiCnt===0){section.show()}li.click(function(){container.children("table").hide();nav.find(".nav-tab-active").removeClass("nav-tab-active");$(this).addClass("nav-tab-active");section.show()});oHeadline.remove();navLiCnt++}})});"use strict";window.rml.uploader={uploading:{},sucessTimeout:null,idFromSelect:function(){var fromSelect=jQuery(".attachments-filter-upload-chooser-fromSelect:visible"),activeOption;if(fromSelect.size()>0){fromSelect=fromSelect.next().children("select"),activeOption=fromSelect.find('option[data-id="'+fromSelect.val()+'"]');if(activeOption.size()>0){return{slug:activeOption.attr("data-slug"),id:parseInt(fromSelect.val()),deny:""}}}return undefined},init:function(){var $=jQuery;if(typeof window.wp!=="undefined"&&typeof wp.Uploader==="function"){$.extend(wp.Uploader.prototype,{init:function(){window.rml.hooks.call("uploader/init",[],this);this.uploader.bind("FileFiltered",function(up,file){file.rmlFolderOpts=window.rml.uploader.idFromSelect()});this.uploader.bind("FilesAdded",function(up,files){for(var i=0;i<files.length;i++){var active=window.rml.library.getObjectOfMediaPickerOrActive(),opts=window.rml.uploader.settings(active,files[i],opts);window.rml.uploader.uploading[files[i].attachment.cid]=opts;files[i].rmlFolder=opts.id;window.rml.uploader.prepareUpload(files[i],active,opts);window.rml.hooks.call("uploader/FilesAddedSingle",[up,files[i],active,opts],this)}});this.uploader.bind("BeforeUpload",function(uploader,file){window.rml.hooks.call("uploader/BeforeUpload",[uploader,file],this);var params=uploader.settings.multipart_params;params.rmlFolder=file.rmlFolder;if(!RMLisDefined(params.rmlFolder)){var active=window.rml.library.getObjectOfMediaPickerOrActive(),opts=window.rml.uploader.settings(active,file,opts);params.rmlFolder=opts.id}});this.uploader.bind("UploadProgress",function(up,file){
window.rml.hooks.call("uploader/UploadProgress",[up,file],this);window.rml.uploader.progress(up,file)});this.uploader.bind("UploadComplete",function(up,files){up.splice();up.total.reset();try{window.rml.library.refreshAllCounts()}catch(e){}})},success:function(file_attachment){window.rml.hooks.call("upload/success",[file_attachment],this);window.rml.uploader.success(file_attachment)}})}},success:function(fileObj){var $=jQuery;var item=$(".rml-uploading-"+fileObj.cid);if(item.size()>0){var data={action:"bulk_move",ids:[fileObj.id],to:parseInt(item.attr("data-id"))};item.find(".percent").css("width","100%");item.find(".read_percent").html("100%");item.remove();window.rml.hooks.call("upload/success/moved",[fileObj,data],this);if(jQuery(".rml-uploading").find(".rml-uploading-item").size()<=0){$(".rml-uploading").stop().slideUp();window.rml.hooks.call("upload/success/movedAll",[],this)}if(this.sucessTimeout!=null){clearTimeout(this.sucessTimeout)}this.sucessTimeout=setTimeout(function(){try{$(".aio-tree-instance").each(function(){window.rml.hooks.call("refreshView",[],$(this))})}catch(e){console.log(e)}clearTimeout(window.rml.uploader.sucessTimeout)},1e3)}},progress:function(up,file){var $=jQuery;file.percent-=1;if(file.percent<0){file.percent=0}var item=$(".rml-uploading-"+file.id),percent=file.percent+"%";if(item.size()>0){item.find(".percent").css("width",percent);item.find(".read_percent").html(percent);if(file.percent>98){item.find(".percent").addClass("finish")}}},settings:function(active,file){if(typeof file.rmlFolderOpts==="object"){return file.rmlFolderOpts}var $=jQuery,opts={slug:null,id:null,deny:""};if(active.size()>0){opts.slug=active.attr("data-slug");if(typeof opts.slug==="undefined"){opts.slug="/"}opts.id=parseInt(active.attr("data-aio-id"));if(active.attr("data-restrictions").indexOf("ins")>-1){opts.slug="/";opts.id=rmlOpts.root;opts.deny='<div class="warnings">                    <span class="deny-gallery">'+rmlOpts.lang.toolbarItems.restrictions.ins+"</span>                </div>"}else{window.rml.hooks.call("uploadCheck",[opts,active.attr("data-aio-type"),file],active)}}else{opts.slug="/";var select=$(".attachment-filters.attachment-filters-rml");if(select.size()>0&&select.val()!="all"){opts.id=parseInt(select.val())}else{opts.id=rmlOpts.root}}return opts},prepareUpload:function(file,active,opts){var $=jQuery;var item=$('<div class="rml-uploading-item rml-uploading-'+file.attachment.cid+" rml-uploading-"+file.id+'""                    data-slug="'+opts.slug+'"                     data-id="'+opts.id+'">                <div class="left"></div>                <div class="right">                    <div class="filename">'+file.name+'</div>                    <div class="folder">                        <i class="fa fa-folder-o"></i> '+opts.slug+"<br />                        "+window.rml.uploader.humanFileSize(file.size,true)+' - <span class="read_percent">0%</span>                    </div>                    <div class="bar">                        <div class="percent"></div>                    </div>                    '+opts.deny+'                </div>                <div class="rml-fix"></div>            </div>').appendTo(".rml-uploading-list");$(".rml-uploading").show();var image=$(new Image).appendTo(item.find(".left"));if($(".rml-hide-upload-preview-1").size()==0){var preloader=new mOxie.Image;preloader.onload=function(){preloader.downsize(48,48);image.prop("src",preloader.getAsDataURL())};preloader.load(file.getSource())}},humanFileSize:function(bytes,si){var thresh=si?1e3:1024;if(Math.abs(bytes)<thresh){return bytes+" B"}var units=si?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];var u=-1;do{bytes/=thresh;++u}while(Math.abs(bytes)>=thresh&&u<units.length-1);return bytes.toFixed(1)+" "+units[u]},secondsFormat:function(totalSec){var hours=Math.floor(totalSec/3600);var minutes=Math.floor((totalSec-hours*3600)/60);var seconds=totalSec-hours*3600-minutes*60;var result=(hours<10?"0"+hours:hours)+":"+(minutes<10?"0"+minutes:minutes)+":"+(seconds<10?"0"+seconds:seconds);return result}};window.rml.hooks.register("uploader/UploadProgress",function(uploader,file){jQuery(".rml-uploading-details-remain-bytes strong").html(window.rml.uploader.humanFileSize(uploader.total.bytesPerSec,true));jQuery(".rml-uploading-details-remain-loaded strong").html(window.rml.uploader.humanFileSize(uploader.total.loaded,true));jQuery(".rml-uploading-details-remain-loaded span").html(window.rml.uploader.humanFileSize(uploader.total.size,true));var remainTime=Math.floor((uploader.total.size-uploader.total.loaded)/uploader.total.bytesPerSec);jQuery(".rml-uploading-details-remain-time strong").html(window.rml.uploader.secondsFormat(remainTime))});window.rml.hooks.register("general",function($){setInterval(function(){$(".attachments-filter-upload-chooser").each(function(){var isInitialized=$(this).data("initialized"),label=$(this),select=$(this).next().children("select");if(!isInitialized){$(this).data("initialized",true);if(label.parents(".attachments-browser").size()>0){label.html(rmlOpts.lang.uploaderUsesLeftTree).show()}else{label.addClass("attachments-filter-upload-chooser-fromSelect");if(label.parents(".uploader-inline-content").size()>0){label.show();label.next().show();$.post(rmlOpts.ajaxUrl,{action:"rml_options_default",nonce:rmlOpts.nonces.treeContent}).done(function(response){if(response.success){select.html(response.data)}})}}}})},500)});window.rml.hooks.register("ready",function($){if(!$("body").hasClass("media-new-php")){return}if(prepareMediaItemInit){var copyPrepareMediaItemInit=prepareMediaItemInit;prepareMediaItemInit=function(file){copyPrepareMediaItemInit.apply(this,arguments);if(file.rmlFolderHTML){var mediaRowFilename=$("#media-item-"+file.id).find(".filename");if(mediaRowFilename.size()>0){mediaRowFilename.after(file.rmlFolderHTML)}}}}setTimeout(function(){if(uploader){uploader.bind("BeforeUpload",function(uploader,file){var params=uploader.settings.multipart_params,slugLabel="/";params.rmlFolder=file.rmlFolder;if(!RMLisDefined(params.rmlFolder)){var opts=window.rml.uploader.idFromSelect();params.rmlFolder=opts?opts.id:-1;slugLabel=opts?opts.slug.toUpperCase():slugLabel}var mediaRowFilename=$("#media-item-"+file.id).find(".filename");if(mediaRowFilename.size()>0){file.rmlFolderHTML='<div class="media-item-rml-folder">'+slugLabel+"</div>";mediaRowFilename.after(file.rmlFolderHTML)}})}}.bind(this),500)});window.rml.hooks.register("uploadCheck",function(opts,type,file,$){if(type=="1"){opts.slug="/";opts.id=rmlOpts.root;opts.deny='<div class="warnings">            <span class="deny-collection">'+rmlOpts.lang.uploadingCollection+"</span>        </div>"}else if(type=="2"){var allowedExts=["jpg","jpeg","jpe","gif","png"],ext=file.name.substr(file.name.lastIndexOf(".")+1).toLowerCase();if($.inArray(ext,allowedExts)<=-1){opts.slug="/";opts.id=rmlOpts.root;opts.deny='<div class="warnings">                <span class="deny-gallery">'+rmlOpts.lang.uploadingGallery+"</span>            </div>"}}});(function($){$(function(){!function(e,t,n){"use strict";!function o(e,t,n){function a(s,l){if(!t[s]){if(!e[s]){var i="function"==typeof require&&require;if(!l&&i)return i(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return a(n?n:t)},c,c.exports,o,e,t,n)}return t[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(o,a,r){var s,l,i,u,c=function(e){return e&&e.__esModule?e:{"default":e}},d=o("./modules/handle-dom"),f=o("./modules/utils"),p=o("./modules/handle-swal-dom"),m=o("./modules/handle-click"),v=o("./modules/handle-key"),y=c(v),h=o("./modules/default-params"),g=c(h),b=o("./modules/set-params"),w=c(b);r["default"]=i=u=function(){function o(e){var t=a;return t[e]===n?g["default"][e]:t[e]}var a=arguments[0];if(d.addClass(t.body,"stop-scrolling"),p.resetInput(),a===n)return f.logStr("SweetAlert expects at least 1 attribute!"),!1;var r=f.extend({},g["default"]);switch(typeof a){case"string":r.title=a,r.text=arguments[1]||"",r.type=arguments[2]||"";break;case"object":if(a.title===n)return f.logStr('Missing "title" argument!'),!1;r.title=a.title;for(var i in g["default"])r[i]=o(i);r.confirmButtonText=r.showCancelButton?"Confirm":g["default"].confirmButtonText,r.confirmButtonText=o("confirmButtonText"),r.doneFunction=arguments[1]||null;break;default:return f.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof a),!1}w["default"](r),p.fixVerticalPosition(),p.openModal(arguments[1]);for(var c=p.getModal(),v=c.querySelectorAll("button"),h=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],b=function(e){return m.handleButton(e,r,c)},C=0;C<v.length;C++)for(var S=0;S<h.length;S++){var x=h[S];v[C][x]=b}p.getOverlay().onclick=b,s=e.onkeydown;var k=function(e){return y["default"](e,r,c)};e.onkeydown=k,e.onfocus=function(){setTimeout(function(){l!==n&&(l.focus(),l=n)},0)},u.enableButtons()},i.setDefaults=u.setDefaults=function(e){if(!e)throw new Error("userParams is required");if("object"!=typeof e)throw new Error("userParams has to be a object");f.extend(g["default"],e)},i.close=u.close=function(){var o=p.getModal();d.fadeOut(p.getOverlay(),5),d.fadeOut(o,5),d.removeClass(o,"showSweetAlert"),d.addClass(o,"hideSweetAlert"),d.removeClass(o,"visible");var a=o.querySelector(".sa-icon.sa-success");d.removeClass(a,"animate"),d.removeClass(a.querySelector(".sa-tip"),"animateSuccessTip"),d.removeClass(a.querySelector(".sa-long"),"animateSuccessLong");var r=o.querySelector(".sa-icon.sa-error");d.removeClass(r,"animateErrorIcon"),d.removeClass(r.querySelector(".sa-x-mark"),"animateXMark");var i=o.querySelector(".sa-icon.sa-warning");return d.removeClass(i,"pulseWarning"),d.removeClass(i.querySelector(".sa-body"),"pulseWarningIns"),d.removeClass(i.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var e=o.getAttribute("data-custom-class");d.removeClass(o,e)},300),d.removeClass(t.body,"stop-scrolling"),e.onkeydown=s,e.previousActiveElement&&e.previousActiveElement.focus(),l=n,clearTimeout(o.timeout),!0},i.showInputError=u.showInputError=function(e){var t=p.getModal(),n=t.querySelector(".sa-input-error");d.addClass(n,"show");var o=t.querySelector(".sa-error-container");d.addClass(o,"show"),o.querySelector("p").innerHTML=e,setTimeout(function(){i.enableButtons()},1),t.querySelector("input").focus()},i.resetInputError=u.resetInputError=function(e){if(e&&13===e.keyCode)return!1;var t=p.getModal(),n=t.querySelector(".sa-input-error");d.removeClass(n,"show");var o=t.querySelector(".sa-error-container");d.removeClass(o,"show")},i.disableButtons=u.disableButtons=function(e){var t=p.getModal(),n=t.querySelector("button.confirm"),o=t.querySelector("button.cancel");n.disabled=!0,o.disabled=!0},i.enableButtons=u.enableButtons=function(e){var t=p.getModal(),n=t.querySelector("button.confirm"),o=t.querySelector("button.cancel");n.disabled=!1,o.disabled=!1},"undefined"!=typeof e?e.sweetAlert=e.swal=i:f.logStr("SweetAlert is a frontend module!"),a.exports=r["default"]},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(e,t,n){var o={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};n["default"]=o,t.exports=n["default"]},{}],3:[function(t,n,o){var a=t("./utils"),r=(t("./handle-swal-dom"),t("./handle-dom")),s=function(t,n,o){function s(e){m&&n.confirmButtonColor&&(p.style.backgroundColor=e)}var u,c,d,f=t||e.event,p=f.target||f.srcElement,m=-1!==p.className.indexOf("confirm"),v=-1!==p.className.indexOf("sweet-overlay"),y=r.hasClass(o,"visible"),h=n.doneFunction&&"true"===o.getAttribute("data-has-done-function");switch(m&&n.confirmButtonColor&&(u=n.confirmButtonColor,c=a.colorLuminance(u,-.04),d=a.colorLuminance(u,-.14)),f.type){case"mouseover":s(c);break;case"mouseout":s(u);break;case"mousedown":s(d);break;case"mouseup":s(c);break;case"focus":var g=o.querySelector("button.confirm"),b=o.querySelector("button.cancel");m?b.style.boxShadow="none":g.style.boxShadow="none";break;case"click":var w=o===p,C=r.isDescendant(o,p);if(!w&&!C&&y&&!n.allowOutsideClick)break;m&&h&&y?l(o,n):h&&y||v?i(o,n):r.isDescendant(o,p)&&"BUTTON"===p.tagName&&sweetAlert.close()}},l=function(e,t){var n=!0;r.hasClass(e,"show-input")&&(n=e.querySelector("input").value,n||(n="")),t.doneFunction(n),t.closeOnConfirm&&sweetAlert.close(),t.showLoaderOnConfirm&&sweetAlert.disableButtons()},i=function(e,t){var n=String(t.doneFunction).replace(/\s/g,""),o="function("===n.substring(0,9)&&")"!==n.substring(9,10);o&&t.doneFunction(!1),t.closeOnCancel&&sweetAlert.close()};o["default"]={handleButton:s,handleConfirm:l,handleCancel:i},n.exports=o["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(n,o,a){var r=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},s=function(e,t){r(e,t)||(e.className+=" "+t)},l=function(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(r(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}},i=function(e){var n=t.createElement("div");return n.appendChild(t.createTextNode(e)),n.innerHTML},u=function(e){e.style.opacity="",e.style.display="block"},c=function(e){if(e&&!e.length)return u(e);for(var t=0;t<e.length;++t)u(e[t])},d=function(e){e.style.opacity="",e.style.display="none"},f=function(e){if(e&&!e.length)return d(e);for(var t=0;t<e.length;++t)d(e[t])},p=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},m=function(e){e.style.left="-9999px",e.style.display="block";var t,n=e.clientHeight;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(e).getPropertyValue("padding-top"),10):parseInt(e.currentStyle.padding),e.style.left="",e.style.display="none","-"+parseInt((n+t)/2)+"px"},v=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var n=+new Date,o=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity+(new Date-n)/100,n=+new Date,+e.style.opacity<1&&setTimeout(o,t)});o()}e.style.display="block"},y=function(e,t){t=t||16,e.style.opacity=1;var n=+new Date,o=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity-(new Date-n)/100,n=+new Date,+e.style.opacity>0?setTimeout(o,t):e.style.display="none"});o()},h=function(n){if("function"==typeof MouseEvent){var o=new MouseEvent("click",{view:e,bubbles:!1,cancelable:!0});n.dispatchEvent(o)}else if(t.createEvent){var a=t.createEvent("MouseEvents");a.initEvent("click",!1,!1),n.dispatchEvent(a)}else t.createEventObject?n.fireEvent("onclick"):"function"==typeof n.onclick&&n.onclick()},g=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):e.event&&e.event.hasOwnProperty("cancelBubble")&&(e.event.cancelBubble=!0)};a.hasClass=r,a.addClass=s,a.removeClass=l,a.escapeHtml=i,a._show=u,a.show=c,a._hide=d,a.hide=f,a.isDescendant=p,a.getTopMargin=m,a.fadeIn=v,a.fadeOut=y,a.fireClick=h,a.stopEventPropagation=g},{}],5:[function(t,o,a){var r=t("./handle-dom"),s=t("./handle-swal-dom"),l=function(t,o,a){var l=t||e.event,i=l.keyCode||l.which,u=a.querySelector("button.confirm"),c=a.querySelector("button.cancel"),d=a.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(i)){for(var f=l.target||l.srcElement,p=-1,m=0;m<d.length;m++)if(f===d[m]){p=m;break}9===i?(f=-1===p?u:p===d.length-1?d[0]:d[p+1],r.stopEventPropagation(l),f.focus(),o.confirmButtonColor&&s.setFocusStyle(f,o.confirmButtonColor)):13===i?("INPUT"===f.tagName&&(f=u,u.focus()),f=-1===p?u:n):27===i&&o.allowEscapeKey===!0?(f=c,r.fireClick(f,l)):f=n}};a["default"]=l,o.exports=a["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(n,o,a){var r=function(e){return e&&e.__esModule?e:{"default":e}},s=n("./utils"),l=n("./handle-dom"),i=n("./default-params"),u=r(i),c=n("./injected-html"),d=r(c),f=".sweet-alert",p=".sweet-overlay",m=function(){var e=t.createElement("div");for(e.innerHTML=d["default"];e.firstChild;)t.body.appendChild(e.firstChild)},v=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=t.querySelector(f);return e||(m(),e=v()),e}),y=function(){var e=v();return e?e.querySelector("input"):void 0},h=function(){return t.querySelector(p)},g=function(e,t){var n=s.hexToRgb(t);e.style.boxShadow="0 0 2px rgba("+n+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},b=function(n){var o=v();l.fadeIn(h(),10),l.show(o),l.addClass(o,"showSweetAlert"),l.removeClass(o,"hideSweetAlert"),e.previousActiveElement=t.activeElement;var a=o.querySelector("button.confirm");a.focus(),setTimeout(function(){l.addClass(o,"visible")},500);var r=o.getAttribute("data-timer");if("null"!==r&&""!==r){var s=n;o.timeout=setTimeout(function(){var e=(s||null)&&"true"===o.getAttribute("data-has-done-function");e?s(null):sweetAlert.close()},r)}},w=function(){var e=v(),t=y();l.removeClass(e,"show-input"),t.value=u["default"].inputValue,t.setAttribute("type",u["default"].inputType),t.setAttribute("placeholder",u["default"].inputPlaceholder),C()},C=function(e){if(e&&13===e.keyCode)return!1;var t=v(),n=t.querySelector(".sa-input-error");l.removeClass(n,"show");var o=t.querySelector(".sa-error-container");l.removeClass(o,"show")},S=function(){var e=v();e.style.marginTop=l.getTopMargin(v())};a.sweetAlertInitialize=m,a.getModal=v,a.getOverlay=h,a.getInput=y,a.setFocusStyle=g,a.openModal=b,a.resetInput=w,a.resetInputError=C,a.fixVerticalPosition=S},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(e,t,n){var o='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>';n["default"]=o,t.exports=n["default"]},{}],8:[function(e,t,o){var a=e("./utils"),r=e("./handle-swal-dom"),s=e("./handle-dom"),l=["error","warning","info","success","input","prompt"],i=function(e){var t=r.getModal(),o=t.querySelector("h2"),i=t.querySelector("p"),u=t.querySelector("button.cancel"),c=t.querySelector("button.confirm");if(o.innerHTML=e.html?e.title:s.escapeHtml(e.title).split("\n").join("<br>"),i.innerHTML=e.html?e.text:s.escapeHtml(e.text||"").split("\n").join("<br>"),e.text&&s.show(i),e.customClass)s.addClass(t,e.customClass),t.setAttribute("data-custom-class",e.customClass);else{var d=t.getAttribute("data-custom-class");s.removeClass(t,d),t.setAttribute("data-custom-class","")}if(s.hide(t.querySelectorAll(".sa-icon")),e.type&&!a.isIE8()){var f=function(){for(var o=!1,a=0;a<l.length;a++)if(e.type===l[a]){o=!0;break}if(!o)return logStr("Unknown alert type: "+e.type),{v:!1};var i=["success","error","warning","info"],u=n;-1!==i.indexOf(e.type)&&(u=t.querySelector(".sa-icon.sa-"+e.type),s.show(u));var c=r.getInput();switch(e.type){case"success":s.addClass(u,"animate"),s.addClass(u.querySelector(".sa-tip"),"animateSuccessTip"),s.addClass(u.querySelector(".sa-long"),"animateSuccessLong");break;case"error":s.addClass(u,"animateErrorIcon"),s.addClass(u.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":s.addClass(u,"pulseWarning"),s.addClass(u.querySelector(".sa-body"),"pulseWarningIns"),s.addClass(u.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":c.setAttribute("type",e.inputType),c.value=e.inputValue,c.setAttribute("placeholder",e.inputPlaceholder),s.addClass(t,"show-input"),setTimeout(function(){c.focus(),c.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof f)return f.v}if(e.imageUrl){var p=t.querySelector(".sa-icon.sa-custom");p.style.backgroundImage="url("+e.imageUrl+")",s.show(p);var m=80,v=80;if(e.imageSize){var y=e.imageSize.toString().split("x"),h=y[0],g=y[1];h&&g?(m=h,v=g):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+e.imageSize)}p.setAttribute("style",p.getAttribute("style")+"width:"+m+"px; height:"+v+"px")}t.setAttribute("data-has-cancel-button",e.showCancelButton),e.showCancelButton?u.style.display="inline-block":s.hide(u),t.setAttribute("data-has-confirm-button",e.showConfirmButton),e.showConfirmButton?c.style.display="inline-block":s.hide(c),e.cancelButtonText&&(u.innerHTML=s.escapeHtml(e.cancelButtonText)),e.confirmButtonText&&(c.innerHTML=s.escapeHtml(e.confirmButtonText)),e.confirmButtonColor&&(c.style.backgroundColor=e.confirmButtonColor,c.style.borderLeftColor=e.confirmLoadingButtonColor,c.style.borderRightColor=e.confirmLoadingButtonColor,r.setFocusStyle(c,e.confirmButtonColor)),t.setAttribute("data-allow-outside-click",e.allowOutsideClick);var b=e.doneFunction?!0:!1;t.setAttribute("data-has-done-function",b),e.animation?"string"==typeof e.animation?t.setAttribute("data-animation",e.animation):t.setAttribute("data-animation","pop"):t.setAttribute("data-animation","none"),t.setAttribute("data-timer",e.timer)};o["default"]=i,t.exports=o["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(t,n,o){var a=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},r=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null},s=function(){return e.attachEvent&&!e.addEventListener},l=function(t){e.console&&e.console.log("SweetAlert: "+t)},i=function(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,o,a="#";for(o=0;3>o;o++)n=parseInt(e.substr(2*o,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),a+=("00"+n).substr(n.length);return a};o.extend=a,o.hexToRgb=r,o.isIE8=s,o.logStr=l,o.colorLuminance=i},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document);!function(t){"use strict";var o=t(window),i=window.document,e=t(i),n=function(){for(var t,o=3,e=i.createElement("div"),n=e.getElementsByTagName("i");e.innerHTML="<!--[if gt IE "+ ++o+"]><i></i><![endif]-->",n[0];);return o>4?o:t}(),s=function(){var t=void 0!==window.pageXOffset?window.pageXOffset:"CSS1Compat"==i.compatMode?window.document.documentElement.scrollLeft:window.document.body.scrollLeft,o=void 0!==window.pageYOffset?window.pageYOffset:"CSS1Compat"==i.compatMode?window.document.documentElement.scrollTop:window.document.body.scrollTop;"undefined"==typeof s.x&&(s.x=t,s.y=o),"undefined"==typeof s.distanceX?(s.distanceX=t,s.distanceY=o):(s.distanceX=t-s.x,s.distanceY=o-s.y);var e=s.x-t,n=s.y-o;s.direction=0>e?"right":e>0?"left":0>=n?"down":n>0?"up":"first",s.x=t,s.y=o};o.on("scroll",s),t.fn.style=function(o){if(!o)return null;var e,n=t(this),s=n.clone().css("display","none");s.find("input:radio").attr("name","copy-"+Math.floor(100*Math.random()+1)),n.after(s);var a=function(t,o){var e;return t.currentStyle?e=t.currentStyle[o.replace(/-\w/g,function(t){return t.toUpperCase().replace("-","")})]:window.getComputedStyle&&(e=i.defaultView.getComputedStyle(t,null).getPropertyValue(o)),e=/margin/g.test(o)?parseInt(e)===n[0].offsetLeft?e:"auto":e};return"string"==typeof o?e=a(s[0],o):(e={},t.each(o,function(t,o){e[o]=a(s[0],o)})),s.remove(),e||null},t.fn.extend({hcSticky:function(i){return 0==this.length?this:(this.pluginOptions("hcSticky",{top:0,bottom:0,bottomEnd:0,innerTop:0,innerSticker:null,className:"sticky",wrapperClassName:"wrapper-sticky",stickTo:null,responsive:!0,followScroll:!0,offResolutions:null,onStart:t.noop,onStop:t.noop,on:!0,fn:null},i||{},{reinit:function(){t(this).hcSticky()},stop:function(){t(this).pluginOptions("hcSticky",{on:!1}).each(function(){var o=t(this),i=o.pluginOptions("hcSticky"),e=o.parent("."+i.wrapperClassName),n=o.offset().top-e.offset().top;o.css({position:"absolute",top:n,bottom:"auto",left:"auto",right:"auto"}).removeClass(i.className)})},off:function(){t(this).pluginOptions("hcSticky",{on:!1}).each(function(){var o=t(this),i=o.pluginOptions("hcSticky"),e=o.parent("."+i.wrapperClassName);o.css({position:"relative",top:"auto",bottom:"auto",left:"auto",right:"auto"}).removeClass(i.className),e.css("height","auto")})},on:function(){t(this).each(function(){t(this).pluginOptions("hcSticky",{on:!0,remember:{offsetTop:o.scrollTop()}}).hcSticky()})},destroy:function(){var i=t(this),e=i.pluginOptions("hcSticky"),n=i.parent("."+e.wrapperClassName);i.removeData("hcStickyInit").css({position:n.css("position"),top:n.css("top"),bottom:n.css("bottom"),left:n.css("left"),right:n.css("right")}).removeClass(e.className),o.off("resize",e.fn.resize).off("scroll",e.fn.scroll),i.unwrap()}}),i&&"undefined"!=typeof i.on&&(i.on?this.hcSticky("on"):this.hcSticky("off")),"string"==typeof i?this:this.each(function(){var i=t(this),a=i.pluginOptions("hcSticky"),r=function(){var t=i.parent("."+a.wrapperClassName);return t.length>0?(t.css({height:i.outerHeight(!0),width:function(){var o=t.style("width");return o.indexOf("%")>=0||"auto"==o?("border-box"==i.css("box-sizing")||"border-box"==i.css("-moz-box-sizing")?i.css("width",t.width()):i.css("width",t.width()-parseInt(i.css("padding-left")-parseInt(i.css("padding-right")))),o):i.outerWidth(!0)}()}),t):!1}()||function(){var o=i.style(["width","margin-left","left","right","top","bottom","float","display"]),e=i.css("display"),s=t("<div>",{"class":a.wrapperClassName}).css({display:e,height:i.outerHeight(!0),width:function(){return o.width.indexOf("%")>=0||"auto"==o.width&&"inline-block"!=e&&"inline"!=e?(i.css("width",parseFloat(i.css("width"))),o.width):"auto"!=o.width||"inline-block"!=e&&"inline"!=e?"auto"==o["margin-left"]?i.outerWidth():i.outerWidth(!0):i.width()}(),margin:o["margin-left"]?"auto":null,position:function(){var t=i.css("position");return"static"==t?"relative":t}(),"float":o["float"]||null,left:o.left,right:o.right,top:o.top,bottom:o.bottom,"vertical-align":"top"});return i.wrap(s),7===n&&0===t("head").find("style#hcsticky-iefix").length&&t('<style id="hcsticky-iefix">.'+a.wrapperClassName+" {zoom: 1;}</style>").appendTo("head"),i.parent()}();if(!i.data("hcStickyInit")){i.data("hcStickyInit",!0);var c=a.stickTo&&("document"==a.stickTo||a.stickTo.nodeType&&9==a.stickTo.nodeType||"object"==typeof a.stickTo&&a.stickTo instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document))?!0:!1,l=a.stickTo?c?e:"string"==typeof a.stickTo?t(a.stickTo):a.stickTo:r.parent();i.css({top:"auto",bottom:"auto",left:"auto",right:"auto"}),o.load(function(){i.outerHeight(!0)>l.height()&&(r.css("height",i.outerHeight(!0)),i.hcSticky("reinit"))});var p=function(t){i.hasClass(a.className)||(t=t||{},i.css({position:"fixed",top:t.top||0,left:t.left||r.offset().left}).addClass(a.className),a.onStart.apply(i[0]),r.addClass("sticky-active"))},f=function(t){t=t||{},t.position=t.position||"absolute",t.top=t.top||0,t.left=t.left||0,("fixed"==i.css("position")||parseInt(i.css("top"))!=t.top)&&(i.css({position:t.position,top:t.top,left:t.left}).removeClass(a.className),a.onStop.apply(i[0]),r.removeClass("sticky-active"))},d=function(e){if(a.on&&i.is(":visible")){if(i.outerHeight(!0)>=l.height())return void f();var n,d=a.innerSticker?t(a.innerSticker).position().top:a.innerTop?a.innerTop:0,u=r.offset().top,h=l.height()-a.bottomEnd+(c?0:u),m=r.offset().top-a.top+d,g=i.outerHeight(!0)+a.bottom,y=o.height(),w=o.scrollTop(),v=i.offset().top,b=v-w;if("undefined"!=typeof a.remember&&a.remember){var k=v-a.top-d;return void(g-d>y&&a.followScroll?w>k&&w+y<=k+i.height()&&(a.remember=!1):a.remember.offsetTop>k?k>=w&&(p({top:a.top-d}),a.remember=!1):w>=k&&(p({top:a.top-d}),a.remember=!1))}w>m?h+a.bottom-(a.followScroll&&g>y?0:a.top)<=w+g-d-(g-d>y-(m-d)&&a.followScroll&&(n=g-y-d)>0?n:0)?f({top:h-g+a.bottom-u}):g-d>y&&a.followScroll?y>=b+g?"down"==s.direction?p({top:y-g}):0>b&&"fixed"==i.css("position")&&f({top:v-(m+a.top-d)-s.distanceY}):"up"==s.direction&&v>=w+a.top-d?p({top:a.top-d}):"down"==s.direction&&v+g>y&&"fixed"==i.css("position")&&f({top:v-(m+a.top-d)-s.distanceY}):p({top:a.top-d}):f()}},u=!1,h=!1,m=function(){if(y(),g(),a.on){var t=function(){"fixed"==i.css("position")?i.css("left",r.offset().left):i.css("left",0)};if(a.responsive){h||(h=i.clone().attr("style","").css({visibility:"hidden",height:0,overflow:"hidden",paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0}),r.after(h));var o=r.style("width"),e=h.style("width");"auto"==e&&"auto"!=o&&(e=parseInt(i.css("width"))),e!=o&&r.width(e),u&&clearTimeout(u),u=setTimeout(function(){u=!1,h.remove(),h=!1},250)}if(t(),i.outerWidth(!0)!=r.width()){var n="border-box"==i.css("box-sizing")||"border-box"==i.css("-moz-box-sizing")?r.width():r.width()-parseInt(i.css("padding-left"))-parseInt(i.css("padding-right"));n=n-parseInt(i.css("margin-left"))-parseInt(i.css("margin-right")),i.css("width",n)}}};i.pluginOptions("hcSticky",{fn:{scroll:d,resize:m}});var g=function(){if(a.offResolutions){t.isArray(a.offResolutions)||(a.offResolutions=[a.offResolutions]);var e=!0;t.each(a.offResolutions,function(t,n){0>n?o.width()<-1*n&&(e=!1,i.hcSticky("off")):o.width()>n&&(e=!1,i.hcSticky("off"))}),e&&!a.on&&i.hcSticky("on")}};g(),o.on("resize",m);var y=function(){var i=!1;void 0!=t._data(window,"events").scroll&&t.each(t._data(window,"events").scroll,function(t,o){o.handler==a.fn.scroll&&(i=!0)}),i||(a.fn.scroll(!0),o.on("scroll",a.fn.scroll))};y()}}))}})}(jQuery,this),function(t){"use strict";t.fn.extend({pluginOptions:function(o,i,e,n){return this.data(o)||this.data(o,{}),o&&"undefined"==typeof i?this.data(o).options:(e=e||i||{},"object"==typeof e||void 0===e?this.each(function(){var s=t(this);s.data(o).options?s.data(o,t.extend(s.data(o),{options:t.extend(s.data(o).options,e||{})})):(s.data(o,{options:t.extend(i,e||{})}),n&&(s.data(o).commands=n))}):"string"==typeof e?this.each(function(){t(this).data(o).commands[e].call(this)}):this)}})}(jQuery)})})(jQuery);window.rml.hooks.call("general");jQuery(document).ready(function(){if(!RMLisDefined(rmlOpts)){return}if(RMLWpIs("media")){window.rml.uploader.init()}var $=jQuery,container,isListMode=rmlOpts.listMode=="list";window.rml.sweetAlert=sweetAlert;$(document).on("click",".rml-migration-dismiss",function(event){var build=$(this).attr("data-build");jQuery.post(rmlOpts.ajaxUrl,{action:"rml_migrate_dismiss",nonce:rmlOpts.nonces.migrateDismiss,
build:build});$(this).parents(".notice").slideUp();event.preventDefault();return false});window.rml.hooks.call("ready");window.rml.defaultAioSettings={container:{listMode:rmlOpts.listMode,isMediaLibrary:false,isModalMode:false,tooltipsterSettings:{speed:0},theme:"wordpress",onRearrangeRelocate:function(id,parentsID,deferred,prevId,nextId,totalPrevId,totalNextId,args){var args=arguments;jQuery.post(rmlOpts.ajaxUrl,{action:"rml_relocate",nonce:rmlOpts.nonces.bulkSort,id:id,parent:parentsID,nextId:nextId},function(response){if(response.success){deferred.resolve();window.rml.hooks.call("relocate",args)}else{deferred.reject();sweetAlert("Oops...",response.data,"error")}}.bind(this))},doNotUseSaveInRearrange:true},toolbarButtons:{items:[{name:"order",content:'<i class="fa fa-arrows"></i>',labelBack:rmlOpts.lang.done,onPreDisable:function(){var active=$(this).allInOneTree("active");return active&&active.attr("data-content-custom-order")!=="2"},onAllowed:function(){if($("body").hasClass("rml-view-gallery-filter-on")){window.rml.sweetAlert("Oops...",rmlOpts.lang.orderFailedFilterOn,"error");return false}var active=$(this).allInOneTree("active"),contentCustomOrder=active.attr("data-content-custom-order"),fAsk=function(onSubmit){sweetAlert({title:rmlOpts.lang.sortConfirmTitle,text:rmlOpts.lang.sortConfirmText,showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:rmlOpts.lang.sortConfirmTitle,cancelButtonText:rmlOpts.lang.cancel,imageUrl:rmlOpts.pluginUrl+"assets/image/find-details.png",html:true},onSubmit)}.bind(this),_listMode=$(this).allInOneTree("option","container.listMode");if(_listMode==="list"&&rmlOpts.wpListModeOrder!=="1"&&typeof window.rml.library.wpTableList!=="undefined"){if(contentCustomOrder!=="1"){fAsk(function(){window.location.href=rmlOpts.wpListModeOrder})}else{window.location.href=rmlOpts.wpListModeOrder}return false}else if(_listMode!=="list"&&contentCustomOrder!=="1"){fAsk(function(){active.attr("data-content-custom-order","1");$(this).allInOneTree("toolbarButton","refresh")}.bind(this))}return true},onClick:function(){var backbone=window.rml.library.getBackboneOfAIO($(this));$(this).allInOneTree("movement",false);if(backbone.view){backbone.view.attachments.refreshSortable(true)}else{var list=window.rml.library.wpTableList;if(typeof list!=="undefined"){list.sortable("enable");list.disableSelection()}}},onCancel:function(){var backbone=window.rml.library.getBackboneOfAIO($(this));$(this).allInOneTree("movement",true);if(backbone.view){backbone.view.attachments.refreshSortable(false)}else{var list=window.rml.library.wpTableList;if(typeof list!=="undefined"){list.sortable("disable");list.enableSelection()}}},toolTipTitle:rmlOpts.lang.toolbarItems.order.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.order.toolTipText,toolTipTextDisabledLink:rmlOpts.lang.toolbarItems.order.toolTipTextDisabledLink},{name:"refresh",content:'<i class="fa fa-refresh"></i>',onClick:function(){window.rml.hooks.call("refreshView",false,$(this))},toolTipTitle:rmlOpts.lang.toolbarItems.refresh.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.refresh.toolTipText},{name:"rename",content:'<i class="fa fa-pencil"></i>',visibleInActiveFolderType:["0","1","2"],onSave:function(folderId,newName){$(this).allInOneTree("loader",true);jQuery.post(rmlOpts.ajaxUrl,{action:"rml_folder_rename",nonce:rmlOpts.nonces.folderRename,name:newName,id:folderId},function(response){$(this).allInOneTree("loader",false);if(response.success){$(this).allInOneTree("toolbarButton","rename");window.rml.hooks.call("renamed",[folderId,newName,response.data.slug],$(this))}else{sweetAlert("Oops...",response.data.join(),"error")}}.bind(this))},usePredefinedFunction:"rename",toolTipTitle:rmlOpts.lang.toolbarItems.rename.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.rename.toolTipText,toolTipTextDisabledLink:rmlOpts.lang.toolbarItems.rename.toolTipTextDisabledLink},{name:"delete",content:'<i class="fa fa-trash-o"></i>',visibleInActiveFolderType:["0","1","2"],onClick:function(){var toDelete=$(this).allInOneTree("active");var slug=toDelete.attr("data-slug"),id=parseInt(toDelete.attr("data-aio-id"));if(!RMLisDefined(slug))return;if(toDelete.parent().children("ul").children("li").size()>0){sweetAlert("Oops...",rmlOpts.lang.deleteFailed,"error")}else{sweetAlert({title:rmlOpts.lang.deleteConfirmTitle,text:rmlOpts.lang.deleteConfirm,type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:rmlOpts.lang.deleteConfirmSubmit,cancelButtonText:rmlOpts.lang.deleteConfirmCancel,closeOnConfirm:false},function(){$(this).allInOneTree("loader",true);jQuery.post(rmlOpts.ajaxUrl,{action:"rml_folder_delete",nonce:rmlOpts.nonces.folderDelete,id:id},function(response){$(this).allInOneTree("loader",false);if(response.success){$(this).allInOneTree("remove",toDelete);window.rml.hooks.call("folderDeleted",id)}else{sweetAlert("Oops...",response.data.join(),"error")}}.bind(this));sweetAlert.close()}.bind(this))}},toolTipTitle:rmlOpts.lang.toolbarItems["delete"].toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems["delete"].toolTipText,toolTipTextDisabledLink:rmlOpts.lang.toolbarItems["delete"].toolTipTextDisabledLink},{name:"rearrange",content:'<i class="fa fa-sort"></i>',usePredefinedFunction:"rearrange",labelBack:rmlOpts.lang.done,toolTipTitle:rmlOpts.lang.toolbarItems.rearrange.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.rearrange.toolTipText},{name:"details",content:'<i class="fa fa-chevron-circle-down"></i>',visibleInActiveFolderType:["0","1","2","4"],toolTipTitle:rmlOpts.lang.toolbarItems.details.toolTipTitle,toolTipText:rmlOpts.lang.toolbarItems.details.toolTipText,toolTipTextDisabledLink:rmlOpts.lang.toolbarItems.details.toolTipTextDisabledLink,onAllowed:function(){if(window.rml.library.isMediaLibrary!==true){window.rml.sweetAlert("Oops...",rmlOpts.lang.detailsFailedOn,"error");return false}else if($(".rml-meta-media-picker").size()>0){if($(".rml-meta-media-picker").parents(".sweet-alert.hideSweetAlert").size()<=0){window.rml.sweetAlert("Oops...",rmlOpts.lang.detailsFailedAlreadyOpen,"error");return false}}return true},onClick:function(){var active=$(this).allInOneTree("active"),name=active.find(".aio-node-name").html(),id=active.attr("data-aio-id"),that=$(this);window.rml.sweetAlert({title:"",text:'<div class="spinner is-active"></div><br /><br />',html:true,showConfirmButton:false});$.ajax({url:rmlOpts.ajaxUrl,data:{action:"rml_meta_content",nonce:rmlOpts.nonces.metaContent,folderId:id},invokeData:{fid:id,name:name},success:function(response){window.rml.hooks.call("folderMeta/loaded",[response,this.invokeData.fid,this.invokeData.name],that)}})}}],labelBack:rmlOpts.lang.cancel},createTypes:[{type:"0",name:"folder",icon:'<i class="fa fa-folder-open"></i><i class="fa fa-folder"></i>',cssClasses:"page-title-action add-new-h2",visibleInActiveFolderType:["0","3","4"],label:'<i class="fa fa-folder-open-o"></i>&nbsp;<i class="fa fa-plus"></i>',toolTipTitle:rmlOpts.lang.createTypes.folder.toolTipTitle,toolTipText:rmlOpts.lang.createTypes.folder.toolTipText},{type:"1",name:"collection",icon:'<i class="mwf-collection"></i>',cssClasses:"page-title-action add-new-h2",visibleInActiveFolderType:["0","1","3","4"],label:'<i class="mwf-collection"></i>&nbsp;&nbsp;<i class="fa fa-plus"></i>',toolTipTitle:rmlOpts.lang.createTypes.collection.toolTipTitle,toolTipText:rmlOpts.lang.createTypes.collection.toolTipText},{type:"2",name:"gallery",icon:'<i class="mwf-gallery"></i>',cssClasses:"page-title-action add-new-h2",visibleInActiveFolderType:["1"],label:'<i class="mwf-gallery"></i>&nbsp;&nbsp;<i class="fa fa-plus"></i>',toolTipTitle:rmlOpts.lang.createTypes.gallery.toolTipTitle,toolTipText:rmlOpts.lang.createTypes.gallery.toolTipText}],createCancel:{label:rmlOpts.lang.cancel,cssClasses:"page-title-action add-new-h2"},movement:{selector:"#wpbody-content ul.attachments > li, .wp-list-table.media tbody tr",onGetLabel:function(draggable){var draggableObjects=$();window.rml.library.iterateDraggedItems(jQuery(draggable),$(this),function(tr){$.merge(draggableObjects,tr)},function(attributes){$.merge(draggableObjects,this.browser.find('li[data-id="'+attributes.id+'"]'))});var items=draggableObjects.size()>0?draggableObjects.size():1;if(draggableObjects.filter(".rml-shortcut").size()>0){$("body").addClass("rml-holding-shortcuts")}else{$("body").removeClass("rml-holding-shortcuts")}$("body").removeClass("rml-holding");var labelMove=items>1?rmlOpts.lang.moveMultipleFiles:rmlOpts.lang.moveSingleFile,labelAppend=items>1?rmlOpts.lang.appendMultipleFiles:rmlOpts.lang.appendSingleFile,containerMove='<div class="rml-movement-move"><i class="fa fa-arrow-right" style="margin-right:5px;"></i> '+RMLFormat(labelMove,items)+"</div>",containerAppend='<div class="rml-movement-append"><i class="fa fa-share rml-shortcut-icon" style="margin-right:5px;"></i> '+RMLFormat(labelAppend,items)+"</div>";return containerMove+containerAppend},onGetHelper:function(draggableLabel){return $('<div class="aio-movement-helper rml-movement-helper">'+draggableLabel+"</div>")},droppableSettings:{accept:function(obj){var result,container=$(this).parents(".aio-tree");try{var type=$(this).attr("data-aio-type");var func=window.rml.typeAccept[type];result=func.bind(this)(obj,container)}catch(e){}return result},drop:function(event,ui){$(event.target).addClass("needs-refresh");var container=$(this).parents(".aio-tree"),ids=[],isShortcut=$("body").hasClass("rml-holding"),folderId=$(event.target).attr("data-aio-id"),activeId=container.allInOneTree("active").attr("data-aio-id"),removeElements=[],removeElementsIterate=function(cb){for(var i=0;i<removeElements.length;i++){cb.bind(removeElements[i])()}};window.rml.library.iterateDraggedItems(ui.draggable,container,function(tr){ids.push(parseInt(tr.find('input[name="media[]"]').attr("value")));removeElements.push(tr)},function(attributes){ids.push(attributes.id);removeElements.push(this.browser.find('li[data-id="'+attributes.id+'"]'))});var doIt=function(){container.allInOneTree("loader",true);removeElementsIterate(function(){$(this).fadeTo(250,.3)});window.rml.hooks.call("move",[ids,folderId]);jQuery.post(rmlOpts.ajaxUrl,{action:"rml_bulk_move",nonce:rmlOpts.nonces.bulkMove,ids:ids,to:folderId,isShortcut:isShortcut},function(response){if(response.success){if(activeId==""&&isShortcut||isShortcut&&activeId==folderId){container.allInOneTree("toolbarButton","refresh")}removeElementsIterate(function(){if(!container.data("isListMode")&&$(this).hasClass("selected")&&$(this).children(".attachment-preview").size()>0){$(this).children(".attachment-preview").click()}if(isShortcut||!isShortcut&&activeId==folderId){$(this).fadeTo(0,1)}else{$(this).remove()}});if(container.data("isListMode")){if($(".wp-list-table.media tbody tr").size()<=0){$(".wp-list-table.media tbody").html('<tr class="no-items"><td class="colspanchange" colspan="6">'+rmlOpts.lang.noMedia+"</td></tr></tbody>")}}window.rml.library.refreshCount(container,function(){container.allInOneTree("loader",false)});window.rml.hooks.call("moved",[ids,folderId,isShortcut],container)}else{removeElementsIterate(function(){$(this).fadeTo(0,1)});window.rml.sweetAlert("Oops...",response.data.join(),"error");container.allInOneTree("loader",false)}})};if($(this).attr("data-aio-id")==""){window.rml.sweetAlert({title:rmlOpts.lang.deleteConfirmTitle,text:rmlOpts.lang.moveFromAllConfirmText,type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:rmlOpts.lang.moveFromAllConfirmSubmit,cancelButtonText:rmlOpts.lang.deleteConfirmCancel},function(){doIt()})}else{doIt()}}}},others:{rootParentId:rmlOpts.root,onCreateFolder:function(name,createType,parentID,obj){$(this).allInOneTree("loader",true);var args=arguments;jQuery.post(rmlOpts.ajaxUrl,{action:"rml_folder_create",nonce:rmlOpts.nonces.folderCreate,name:name,parent:parentID,type:createType.type},function(response){$(this).allInOneTree("loader",false);if(response.success){window.rml.hooks.call("createdBeforeRendering",[args,response],$(this))}else{sweetAlert("Oops...",response.data.join(),"error")}}.bind(this))},labelRearrangeSave:rmlOpts.lang.save,onAfterFinish:function(){$(this).show();var containerOptions=$(this).allInOneTree("option").container,thisListMode=containerOptions.listMode,thisIsDefaultMediaLibrary=containerOptions.isMediaLibrary,thisIsModalMode=containerOptions.isModalMode,container=$(this);if(thisListMode==="list"&&window.location.hash==="#order"){$(this).allInOneTree("toolbarButton","order");window.location.hash=""}if($(this).hasClass("aio-lazy")){window.rml.library.initializeTreeContentLoader(RMLUrlParams().rml_folder);window.rml.library.treeContentLoader.done(function(response){$(this).allInOneTree("nodesHTML",$(response.data.nodes).html(),true);$(this).allInOneTree("counts",{"-1":response.data.cntRoot});window.rml.hooks.call("afterInit",false,container);window.rml.hooks.call("afterInit/"+thisListMode,false,container);if(thisIsDefaultMediaLibrary){window.rml.hooks.call("afterInit/ML",false,container);window.rml.hooks.call("afterInit/ML/"+thisListMode,false,container)}if(thisIsModalMode!==false){window.rml.hooks.call("afterInit/modal",thisIsModalMode,container)}}.bind(this))}},onSwitchFolder:function(obj,oldID){}}};if($("body").hasClass("wp-admin")&&$("body").hasClass("upload-php")){window.rml.hooks.call("ready/mediaLibrary");window.rml.library.isMediaLibrary=true;$("body").addClass("upload-php-mode-"+rmlOpts.listMode+" activate-aio");container=$(".rml-container.rml-dummy").clone().prependTo("body.wp-admin.upload-php #wpbody");container.removeClass("rml-dummy").addClass("rml-no-dummy");window.rml.library.container=container;var aioSettings=$.extend(true,{},window.rml.defaultAioSettings,{container:{isMediaLibrary:true,customSelectToChange:"#wpbody-content .attachment-filters-rml",resizeOpposite:"#wpbody-content",theme:"wordpress",hcStickySettings:{top:32,bottom:50,offResolutions:-700},onResizeFinished:function(width){jQuery.post(rmlOpts.ajaxUrl,{action:"rml_sidebar_resize",nonce:rmlOpts.nonces.sidebarResize,width:width},function(response){});window.rml.hooks.call("Sidebar/Resize",[width],$(this))}}});window.rml.hooks.call("aioSettings",aioSettings);window.rml.hooks.call("aioSettings/"+rmlOpts.listMode,aioSettings);container.data("isListMode",isListMode);container.allInOneTree(aioSettings)}else{window.rml.library.customLists();window.rml.hooks.call("ready/noMediaLibrary")}jQuery(document).on("change",".rml-folder-edit select",function(){jQuery(this).css("opacity","1")})});