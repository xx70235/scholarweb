!function(a){"use strict";function e(a,b){return 0===b.toUpperCase().indexOf(a.toUpperCase())}function f(b){var c={allowClear:btf_localization.allow_clear,dropdownCssClass:":all:",containerCssClass:":all:",syncCssClasses:!0,minimumResultsForSearch:parseInt(btf_localization.min_search)};"1"==btf_localization.show_description&&(c.templateResult=g,c.templateSelection=h),""!==btf_localization.language&&(c.language=btf_localization.language),"1"==btf_localization.rtl&&(c.dir="rtl");var d;"1"==btf_localization.disable_fuzzy?a.fn.select2.amd.require(["select2/compat/matcher"],function(f){c.matcher=f(e),d="undefined"!=typeof b?b.select2(c):a(".beautiful-taxonomy-filters-select").select2(c)}):d="undefined"!=typeof b?b.select2(c):a(".beautiful-taxonomy-filters-select").select2(c)}function g(b){if(!b.id)return b.text;var c=b.text;b.text.indexOf(":.:")!==-1&&(c=c.replace(":.:",' <br><span class="term-description">'),c=c.replace(":-:","</span>"));var d=a('<span class="'+b.element.className+'">'+c+"</span>");return d}function h(b){if(!b.id||b.text.indexOf(":.:")===-1)return b.text;var c=b.text,d=/(:\.:[\s\S]*?:-:)/,e=d.exec(c);c=c.replace(e[0],"");var f=a("<span>"+c+"</span>");return f}function i(e){c&&b.abort(),d&&clearTimeout(d),d=setTimeout(function(){g.find(".beautiful-taxonomy-filters-loader").addClass("active"),g.find("select.beautiful-taxonomy-filters-select").prop("disabled",!0),g.find(".beautiful-taxonomy-filters-button").prop("disabled",!0)},800);var g=e.closest("#beautiful-taxonomy-filters-form"),h=e.data("nonce"),i=a('input[name="post_type"]').val(),j=e.data("taxonomy"),k=[];g.find("select.beautiful-taxonomy-filters-select").each(function(b){var c=a(this),e=(c.data("taxonomy"),c.val());""===e&&(e=0),k.push({taxonomy:c.data("taxonomy"),term:e})}),c=!0,b=a.ajax({type:"post",dataType:"json",url:btf_localization.ajaxurl,data:{action:"update_filters_callback",selects:k,posttype:i,current_taxonomy:j,nonce:h},success:function(b){d&&clearTimeout(d),g.find("select.beautiful-taxonomy-filters-select").prop("disabled",!1),g.find(".beautiful-taxonomy-filters-loader").removeClass("active"),g.find(".beautiful-taxonomy-filters-button").prop("disabled",!1),Object.keys(b.taxonomies).length>0&&a.each(b.taxonomies,function(b,c){var d=g.find('select.beautiful-taxonomy-filters-select[data-taxonomy="'+b+'"]');if(d.find("option").each(function(){var b=a(this),d=b.val();b.text();return""===d||0===d||void(a.inArray(d,c)===-1?b.prop("disabled",!0):b.prop("disabled",!1))}),"1"!=btf_localization.disable_select2){var e=g.find('select.beautiful-taxonomy-filters-select[data-taxonomy="'+b+'"]');e.select2("destroy"),f(e)}})},error:function(){d&&clearTimeout(d),g.find("select.beautiful-taxonomy-filters-select").prop("disabled",!1),g.find(".beautiful-taxonomy-filters-loader").removeClass("active"),g.find(".beautiful-taxonomy-filters-button").prop("disabled",!1)},complete:function(){c=!1}})}var b,d,c=!1;a(document).ready(function(){if(1!=btf_localization.disable_select2&&f(),1==btf_localization.conditional_dropdowns){for(var b=a(".beautiful-taxonomy-filters form, .beautiful-taxonomy-filters-widget form"),c=0;c<b.length;c++)for(var d=a(b[c]).find(".beautiful-taxonomy-filters-select"),e=0;e<d.length;e++)if(0!==a(d[e]).val()){i(a(d[e]));break}a(".beautiful-taxonomy-filters, .beautiful-taxonomy-filters-widget").on("change",".beautiful-taxonomy-filters-select",function(){var b=a(this);i(b)})}})}(jQuery);
